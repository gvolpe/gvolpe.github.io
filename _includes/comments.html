{% if page.comments %}
  <hr>

  <aside id="comments" class="disqus">

    <h2 class="txt-center">Comments</h2>

    <div id="disqus_thread"></div>

    <script>

      function hashCode(str) {
        return Array.from(str)
          .reduce((s, c) => Math.imul(31, s) + c.charCodeAt(0) | 0, 0)
      }

      var disqus_config = function () {
        this.page.url = '{{ site.url }}{{ site.baseurl }}{{ page.id }}';
        this.page.identifier = hashCode('{{ page.id }}');
      };

      (function() {
        var d = document, s = d.createElement('script');
        s.src = 'https://{{ site.disqus_shortname }}.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
      })();

    </script>

    <noscript>
      Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
    </noscript>

  </aside>
{% endif %}
