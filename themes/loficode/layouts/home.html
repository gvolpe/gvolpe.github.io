{{ define "main" }}
<div class="container">
  <div class="author-profile-section">
    <div class="profile-photo-container">
      <img
        src="{{ .Site.Params.Author.image | absURL }}"
        alt="{{ .Site.Params.Author.name }}"
        class="profile-photo"
      />
    </div>
    <h2 class="handle">{{ .Site.Params.tagline | markdownify }}</h2>

    <h4 class="tagline">Lead Software Engineer obsessed with correctness and reproducibility</h4>
    <!--<div class="filter-tags">-->
      <!--<ul>-->
        <!--<li>The future is <strong>&lambda; functional</strong><i class="fab fa-lambda"></i>.</li>-->
        <!--<li>The future is <strong>content-addressed</strong>.</li>-->
      <!--</ul>-->
      <!--<span>Leveraging <strong>&lambda; functional programming</strong> to achieve the former, and <strong><i class="fab fa-scala"></i>Nix</strong> for the latter.</span>-->
    <!--</div>-->

    <div class="social-links">
      {{ partial "socials.html" . }}
    </div>
  </div>

  {{ partial "email-dialog.html" . }}

  {{ partial "books.html" . }}

  <div class="taxonomy-header">
    <h2 class="taxonomy-title">Latest on the blog</h2>
  </div>

  <div class="posts-list" id="posts-container">
    {{ $posts := where .Site.RegularPages "Section" "eq" "blog" }} {{
    $postsPerPage := 3 }} {{ range first $postsPerPage $posts }} {{ partial
    "post-list-item.html" . }} {{ end }}
  </div>

  {{ $posts := where .Site.RegularPages "Section" "eq" "blog" }} {{ if gt (len
  $posts) 3 }}
  <div class="load-more-section">
    <button
      id="load-more-btn"
      class="load-more-btn"
      data-loaded="3"
      data-total="{{ len $posts }}"
    >
      <span class="load-more-text">Load More Posts</span>
      <span class="load-more-icon">ðŸ¦–</span>
    </button>
    <div class="load-more-loading" id="load-more-loading" style="display: none">
      <span class="loading-text">Loading more content...</span>
      <div class="loading-dots">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </div>
  {{ end }}
</div>
{{ end }}
